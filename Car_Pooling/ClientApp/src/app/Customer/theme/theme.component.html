<div class="wrapper d-flex align-items-stretch">
  <app-csidebar></app-csidebar>

    <!-- Page Content  -->
  <div id="content" class="p-1" *ngIf="showMainContent">
    <div class="row d-flex justify-content-center">
        <div class="p-3 d-flex justify-content-center">
          <h3>Mark Your Sourse & Destination</h3>
        </div>
        <!-- <button (click)="change()">Click</button> -->
        <agm-map class="col-md-9 col-sm-12"
            [latitude]="lat"
            [longitude]="lng"
            [zoom]="zoom"
            [zoomControl]="false"
            (mapClick)="mapClicked($event)"
          >
            <agm-marker
              *ngFor="let m of markers; let i = index"
              [iconUrl]="m.iconUrl"
              [latitude]="m.lat"
              [longitude]="m.lng"
              [label]="m.label"
              [markerDraggable]="m.draggable"
              (dragEnd)="markerDragEnd(m, $event)"
            >
            </agm-marker>
          </agm-map>
      <form class="form p-3 mt-3 col-md-9 col-sm-12 ">
          <div class="form-row">
            <div class="custom-control custom-radio custom-control-inline">
              <input type="radio" id="once" [(ngModel)]="type" name="type" class="custom-control-input" value="Once" (change)="changetype($event)">
              <label class="custom-control-label" for="once">Once</label>
            </div>
            <div class="custom-control custom-radio custom-control-inline ml-md-5">
              <input type="radio" id="daily" [(ngModel)]="type" name="type" class="custom-control-input" value="Daily" (change)="changetype($event)">
              <label class="custom-control-label" for="daily" >Daily</label>
            </div>
          </div>
          <!-- <div class="form-group col-md-3">
            <label>Trip Type: </label>
            <select class="form-control" name="type"  (change)="changetype($event)" style="width: 100%; height: 38px;" >
                <option value="Once">Once</option>
                <option value="Daily">Daily</option>
            </select>
          </div> -->
          <div class="form-row mt-2 d-flex justify-content-center" >
            <!-- <label>Date</label> -->
            <div class="col-sm-12 col-md-4">
              <input class="form-control date-picker" [(ngModel)]="Date" name="Date" placeholder=" Select Date" type="datetime-local" min="{{time}}" required>
            </div>
          </div>
          <!-- <div class="form-group col-md-3 ml-md-3">
            <label>Travelling Time</label> &nbsp;
            <input class="form-control" type="time" placeholder="time" [(ngModel)]="time" name="tme" >
          </div> -->

        <!-- <div class="form-row mt-2" *ngIf="showDays">
          <label class="font-weight-bold">Days</label>
          <div class="custom-control custom-checkbox ml-5" >
            <input type="checkbox"  name="Mon" [(ngModel)]="Mon" class="custom-control-input" id="M" checked>
            <label class="custom-control-label" for="M">Mon</label>
          </div>
          <div class="custom-control custom-checkbox ml-5">
            <input type="checkbox"  name="Tue" [(ngModel)]="Tue"  class="custom-control-input" id="Tu" checked>
            <label class="custom-control-label" for="Tu">Tue</label>
          </div>
          <div class="custom-control custom-checkbox ml-5">
            <input type="checkbox"  name="Wed" [(ngModel)]="Wed" class="custom-control-input" id="W" checked>
            <label class="custom-control-label" for="W">Wed</label>
          </div>
          <div class="custom-control custom-checkbox ml-5">
            <input type="checkbox" name="Thu" [(ngModel)]="Thu" class="custom-control-input" id="Th" checked>
            <label class="custom-control-label " for="Th">Thu</label>
          </div>
          <div class="custom-control custom-checkbox  ml-5">
            <input type="checkbox" name="Fri" [(ngModel)]="Fri" class="custom-control-input" id="F" checked>
            <label class=" custom-control-label" for="F">Fri</label>
          </div>
          <div class="custom-control custom-checkbox ml-5">
            <input type="checkbox" name="Sat" [(ngModel)]="Sat" class="custom-control-input" id="Sat" checked>
            <label class=" custom-control-label" for="Sat">Sat</label>
          </div>
          <div class="custom-control custom-checkbox ml-5">
            <input type="checkbox" name="Sun" [(ngModel)]="Sun" class="custom-control-input" id="Sun" checked>
            <label class=" custom-control-label" for="Sun">Sun</label>
          </div>
        </div> -->
        <div class="form-row mt-4">

          <div class="form-group">
            <label>Total Seats</label>&nbsp; &nbsp;
            <div>
             <button id="Btn" class="btn btn-danger" (click)="decrement()">&nbsp;&nbsp;&nbsp;-&nbsp;&nbsp;&nbsp;</button>
              <span class="m-3">{{seats}}</span>
              <button id="Btn" class="btn btn-success" (click)="increment()">&nbsp;&nbsp;&nbsp;+&nbsp;&nbsp;&nbsp;</button>
            </div>
          </div>
        </div>

        <div class="form-row mt-3 d-flex justify-content-center">
          <button type="submit" class="btn btn-dark btn-outline-light p-2" (click)="SearchRide()">Search Available Rides</button>
        </div>
      </form>
    </div>

  </div>
  <div id="content" class="p-md-3" *ngIf="!showMainContent">
    <div class="row">
      <div class="col-lg-3 col-md-3 col-sm-12 mb-30 mx-3" *ngFor="let i of drivers;let a=index">
        <div class="row card card-box" >
          <div class="d-flex justify-content-center">
            <img id="pic" class="card-img-top col-md-4" src="{{i.driver.image}}">
          </div>
          <div class="card-body p-3">
            <div class="d-flex justify-content-center">
              <h5 class=" row text-warning weight-500">{{i.rank}} â˜†</h5>
            </div>
            <div class="d-flex justify-content-center">
              <h5 class="row card-title weight-500">{{i.driver.firstname}} {{i.driver.lastname}}</h5>
            </div>
            <div class="d-flex justify-content-start mt-1">
              <p class="text-dark"> {{i.vehicle.model}} &nbsp; seats:{{i.seats}} &nbsp;</p>
              <p class="text-success">Time: {{i.time.toLocaleTimeString()}}</p>
            </div>
            <div class="d-flex justify-content-start">
              <p class="text-black" >From : {{i.date}}  &nbsp;</p>
              <p *ngIf="i.days.length!=0"> Till: {{i.end_date.split('T')[0]}}</p>
            </div>

            <div class="d-flex flex-wrap mt-1" >
              <div class="text-blue-50" *ngFor="let a of i.days">{{a}} &nbsp;</div>
            </div>
            <div class="d-flex justify-content-end">

              <h5 class="text-danger"> RS {{i.fare}}</h5>
            </div>
            <div class="row mt-2">
              <a class="btn btn-block text-white btn-primary p-2" (click)="BookingModal(i)">Book</a>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="row d-flex justify-content-start">
      <a class="btn btn-block btn-danger text-white p-2 m-5" (click)="Cancel()">Cancel</a>
    </div>
  </div>
  <div *ngIf="child">
    <app-passenger [childMessage]="Message"></app-passenger>
  </div>
</div>
<jw-modal id="custom-modal-1" style="height: 400px;">
  <div class="row d-flex justify-content-end mb-1">
    <button class="btn border-5" (click)="closeModal('custom-modal-1');"><i class="fa fa-times"></i></button>
  </div>
  <div class="row">
    <div class="col-md-12 col-sm-12">
      <div class="card card-box col-md-12 mb-2">
        <div class="card-body m-5">
          <div class="row">
            <div class="col-sm-12 col-md-12">
              <label>Travel From :</label>
              <input class="form-control date-picker" [(ngModel)]="Date" name="Date"  type="Date" min="{{date}}" max="{{e_date}}"  required>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-12 col-md-12">
              <label>Travel till :</label>
              <input class="form-control date-picker" [(ngModel)]="end_date" name="end_date"  type="date" min="{{date}}" max="{{e_date}}" required>
            </div>
          </div>
          <div class="row mt-3">
            <label>Days:</label>
            <div class="col-sm-12 col-md-12">
              <div class="d-flex float-left form-check-inline pr-md-2" *ngFor="let d of alldays">
                <input type="checkbox" (change)="onChange(d)" class="form-check-input" id="{{d}}" checked>
                <label class=" form-check-label" for="{{d}}">{{d}}</label>
              </div>
            </div>
          </div>
          <div class="row mt-3">
            <div class="col-sm-12 col-md-12">
              <button class="btn btn-block btn-primary p-2" (click)="Book(book)">Confirm Booking</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

</jw-modal>
<jw-modal id="custom-modal-2" style="height: 400px;">
  <div class="row d-flex justify-content-end mb-1">
    <button class="btn border-5" (click)="closeModal('custom-modal-2');"><i class="fa fa-times"></i></button>
  </div>
  <div class="row">
    <div class="col-md-12 col-sm-12">
      <div class="card card-box col-md-12 mb-2">
        <div class="card-body m-5">
          <div class="row">
            <div class="col-sm-12 col-md-12">
              <label>Travel On :</label>
              <input class="form-control date-picker" [(ngModel)]="Date" name="Date"  type="Date" min="{{date}}" max="{{e_date}}"  required>
            </div>
          </div>
          <div class="row mt-3">
            <div class="col-sm-12 col-md-12">
              <button class="btn btn-block btn-primary p-2" (click)="Book(book)">Confirm Booking</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

</jw-modal>
